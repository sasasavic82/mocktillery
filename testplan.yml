config:
  plugins:
    mocktillery: {}
  tls:
    rejectUnauthorized: false
  mocktillery:
    security:
      certificate: ./certificates/matls.mock.cert.client.crt
      key: ./certificates/matls.mock.cert.client.key
  phases:
    - duration: 300
      arrivalRate: 20
      name: Create 20 virtual users every second for 5 minutes
  defaults:
    headers:
      x-telstra-mocktillary-id: '{{ $uuid }}'
scenarios:
  - name: 'Test #1: 200 OK Response'
    flow:
      - post:
          url: /api/v1/mock
          json:
            settings:
              failureProbability: 0.1
              simulators:
                delay:
                  type: random
                  from: 200
                  to: 5000
            body:
              profile: full
              description: Full load test profile
