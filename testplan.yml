config:
  plugins:
    mocktillery: {}
  tls:
    rejectUnauthorized: false
  mocktillery:
    security:
      certificate: ./certificates/matls.mock.cert.client.crt
      key: ./certificates/matls.mock.cert.client.key
  phases:
    - duration: 120
      arrivalRate: 10
      rampTo: 50
      name: Ramp up virtual user arrival rate from 10 to 50 over 2 minutes
    - duration: 120
      arrivalRate: 50
      name: Sustained max load for 2 minutes
    - duration: 60
      arrivalRate: 10
      name: Ramp down to 10 virtual users per second for 1 minute
  defaults:
    headers:
      x-telstra-mocktillary-id: '{{ $uuid }}'
scenarios:
  - name: 'Test #1: 200 OK Response'
    flow:
      - post:
          url: /api/v1/mock
          json:
            settings:
              failureProbability: 0.1
              simulators:
                delay:
                  type: random
                  from: 200
                  to: 5000
            body:
              profile: full
              description: Full load test profile
